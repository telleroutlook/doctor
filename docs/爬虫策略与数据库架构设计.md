# é»˜æ²™ä¸œè¯Šç–—æ‰‹å†Œçˆ¬è™«ç­–ç•¥ä¸æ•°æ®åº“æ¶æ„è®¾è®¡

## ğŸ¯ è®¾è®¡ç›®æ ‡

**ä¸»è¦ç›®æ ‡ï¼š** æ„å»ºä¸€ä¸ªé«˜æ•ˆã€åˆè§„ã€å¯æ‰©å±•çš„é»˜æ²™ä¸œè¯Šç–—æ‰‹å†Œæ•°æ®æŠ“å–ä¸æ£€ç´¢ç³»ç»Ÿ

**æ ¸å¿ƒè¦æ±‚ï¼š**
- âœ… åˆè§„æŠ“å–ï¼šä¸¥æ ¼éµå®ˆrobots.txtæ”¿ç­–
- âœ… é«˜æ•ˆå­˜å‚¨ï¼šç»“æ„åŒ–æ•°æ®ï¼Œä¾¿äºæ£€ç´¢
- âœ… æ™ºèƒ½è§£æï¼šå‡†ç¡®æå–åŒ»å­¦å†…å®¹
- âœ… å¢é‡æ›´æ–°ï¼šæ”¯æŒåç»­å¢é‡æŠ“å–
- âœ… æ–­ç‚¹ç»­ä¼ ï¼šæ”¯æŒä¸­æ–­åç»§ç»­æŠ“å–

---

## ğŸš€ çˆ¬è™«ç­–ç•¥è®¾è®¡

### 1. æŠ“å–ç­–ç•¥è§„åˆ’

#### åˆ†é˜¶æ®µæŠ“å–ç­–ç•¥
```python
PHASE_1 = {
    "name": "åŸºç¡€æ¶æ„æ­å»º",
    "target": "ä¸»åˆ†ç±»é¡µé¢å’Œç´¢å¼•",
    "urls": [
        "https://www.msdmanuals.com/home/",
        "https://www.msdmanuals.com/professional/",
        "https://www.msdmanuals.cn/",
        "https://www.msdmanuals.com/home/health-topics/",
        "https://www.msdmanuals.com/professional/"
    ],
    "max_pages": 200,
    "priority": "HIGH"
}

PHASE_2 = {
    "name": "åŒ»å­¦ä¸»é¢˜æŠ“å–",
    "target": "26ä¸ªåŒ»å­¦ä¸“ç§‘çš„ä¸»è¦å†…å®¹",
    "urls_pattern": [
        "/home/health-topics/{category}/",
        "/professional/{category}/"
    ],
    "max_pages": 10000,
    "priority": "HIGH"
}

PHASE_3 = {
    "name": "è¯¦ç»†å†…å®¹æŠ“å–",
    "target": "å…·ä½“çš„ç–¾ç—…ã€ç—‡çŠ¶ã€è¯ç‰©é¡µé¢",
    "urls_pattern": [
        "/home/{category}/{subcategory}/{topic}",
        "/professional/{category}/{subcategory}/{topic}"
    ],
    "max_pages": 80000,
    "priority": "MEDIUM"
}

PHASE_4 = {
    "name": "å¤šåª’ä½“èµ„æº",
    "target": "å›¾ç‰‡ã€è§†é¢‘ã€è¡¨æ ¼ç­‰èµ„æº",
    "urls_pattern": [
        "*/multimedia/*",
        "*/images/*",
        "*/videos/*"
    ],
    "max_pages": 10000,
    "priority": "LOW"
}
```

#### ä¼˜å…ˆçº§ç­–ç•¥
```python
PRIORITY_MAPPING = {
    "ä¸»é¡µ": 1,
    "åŒ»å­¦åˆ†ç±»é¡µ": 2,
    "ä¸“ç§‘æ¦‚è§ˆé¡µ": 3,
    "å…·ä½“ç–¾ç—…é¡µ": 4,
    "ç—‡çŠ¶é¡µ": 5,
    "è¯ç‰©é¡µ": 6,
    "å¤šåª’ä½“é¡µ": 7,
    "è¾…åŠ©èµ„æº": 8
}
```

### 2. å¹¶å‘æ§åˆ¶ç­–ç•¥

#### é¢‘ç‡é™åˆ¶é…ç½®
```python
RATE_LIMIT_CONFIG = {
    "DEFAULT_DELAY": 5.0,  # éµå®ˆrobots.txtçš„5ç§’å»¶è¿Ÿ
    "DOMAIN_DELAYS": {
        "www.msdmanuals.com": 5.0,
        "www.msdmanuals.cn": 6.0,  # ä¸­æ–‡ç‰ˆç¨å¾®å»¶è¿Ÿ
        "www.msdvetmanual.com": 7.0
    },
    "PEAK_HOURS": {
        "enabled": False,  # éé«˜å³°æ—¶æ®µ
        "hours": [9, 17],  # 9-17ç‚¹è®¤ä¸ºæ˜¯é«˜å³°
        "multiplier": 2.0
    },
    "LOAD_BALANCE": {
        "concurrent_requests": 3,  # æ¯ä¸ªåŸŸåæœ€å¤š3ä¸ªå¹¶å‘è¯·æ±‚
        "max_concurrent": 5,       # æ€»å¹¶å‘ä¸è¶…è¿‡5ä¸ª
        "connection_pool_size": 10
    }
}
```

#### ä»£ç†å’Œè¯·æ±‚å¤´ç­–ç•¥
```python
USER_AGENTS = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
    "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
]

REQUEST_HEADERS = {
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
    "Accept-Language": "en-US,en;q=0.5,zh-CN;q=0.3",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "keep-alive",
    "Upgrade-Insecure-Requests": "1"
}
```

### 3. é”™è¯¯å¤„ç†ç­–ç•¥

#### é‡è¯•æœºåˆ¶
```python
RETRY_CONFIG = {
    "max_retries": 3,
    "retry_delay": (1, 5),  # 1-5ç§’é€’å¢å»¶è¿Ÿ
    "retry_status_codes": [429, 500, 502, 503, 504],
    "backoff_factor": 2,
    "give_up_status_codes": [403, 404, 451]
}
```

#### æ–­ç‚¹ç»­ä¼ æœºåˆ¶
```python
RESUME_MECHANISM = {
    "state_file": "crawler_state.json",
    "save_interval": 100,  # æ¯100é¡µä¿å­˜ä¸€æ¬¡çŠ¶æ€
    "checkpoints": [
        "crawler_checkpoint_phase1.json",
        "crawler_checkpoint_phase2.json",
        "crawler_checkpoint_phase3.json"
    ],
    "recovery_steps": [
        "è¯»å–æœ€åä¿å­˜çš„URL",
        "è·³è¿‡å·²æˆåŠŸæŠ“å–çš„é¡µé¢",
        "æ¸…ç†ä¸å®Œæ•´çš„ä¸‹è½½",
        "é‡æ–°åˆå§‹åŒ–ä¸‹è½½çŠ¶æ€"
    ]
}
```

### 4. åçˆ¬è™«åº”å¯¹ç­–ç•¥

#### æ™ºèƒ½å»¶è¿Ÿ
```python
INTELLIGENT_DELAY = {
    "base_delay": 5.0,
    "adaptive_delay": True,
    "delay_factors": {
        "time_of_day": {
            "business_hours": 1.0,      # 9-17ç‚¹æ­£å¸¸
            "after_hours": 0.7,         # 17-22ç‚¹ç¨å¿«
            "night_time": 0.5           # 22-6ç‚¹æ›´å¿«
        },
        "response_time": {
            "fast_response": 1.0,       # <1s
            "normal_response": 1.2,     # 1-3s
            "slow_response": 2.0        # >3s
        },
        "error_rate": {
            "low_error": 1.0,           # <5%é”™è¯¯ç‡
            "medium_error": 1.5,        # 5-10%é”™è¯¯ç‡
            "high_error": 3.0           # >10%é”™è¯¯ç‡
        }
    }
}
```

#### åˆ†å¸ƒå¼ç­–ç•¥
```python
DISTRIBUTED_CONFIG = {
    "enabled": False,  # å…ˆå®ç°å•æœºç‰ˆæœ¬
    "worker_count": 2,  # å·¥ä½œçº¿ç¨‹æ•°
    "workload_balancing": "round_robin",
    "shared_state": "redis",  # å…±äº«çŠ¶æ€å­˜å‚¨
    "coordination": "master_slave"
}
```

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„è®¾è®¡

### 1. æ ¸å¿ƒè¡¨ç»“æ„è®¾è®¡

#### æ–‡ç« ä¸»è¡¨ï¼ˆarticlesï¼‰
```sql
CREATE TABLE articles (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    url VARCHAR(1000) UNIQUE NOT NULL,
    title VARCHAR(500) NOT NULL,
    subtitle VARCHAR(500),
    category VARCHAR(100),
    subcategory VARCHAR(100),
    content LONGTEXT,
    content_html LONGTEXT,
    excerpt TEXT,
    version VARCHAR(20) DEFAULT 'home', -- 'home', 'professional', 'veterinary'
    language VARCHAR(10) DEFAULT 'en',  -- 'en', 'zh', 'fr', etc.
    author VARCHAR(200),
    last_reviewed DATE,
    published_date DATE,
    word_count INTEGER DEFAULT 0,
    hash_content VARCHAR(64),  -- SHA256 hash for deduplication
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_category (category),
    INDEX idx_language (language),
    INDEX idx_version (version),
    INDEX idx_title (title(100)),
    FULLTEXT INDEX ft_title_content (title, content)
);
```

#### åŒ»å­¦åˆ†ç±»è¡¨ï¼ˆcategoriesï¼‰
```sql
CREATE TABLE categories (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(200) NOT NULL,
    slug VARCHAR(200) NOT NULL,
    parent_id INTEGER,
    level INTEGER DEFAULT 1,  -- 1=ä¸»åˆ†ç±», 2=å­åˆ†ç±», 3=å…·ä½“ä¸»é¢˜
    description TEXT,
    article_count INTEGER DEFAULT 0,
    version VARCHAR(20) DEFAULT 'home',
    language VARCHAR(10) DEFAULT 'en',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (parent_id) REFERENCES categories(id),
    INDEX idx_parent (parent_id),
    INDEX idx_slug (slug),
    INDEX idx_version_lang (version, language),
    UNIQUE KEY uk_slug_version_lang (slug, version, language)
);
```

#### åŒ»å­¦æœ¯è¯­è¡¨ï¼ˆmedical_termsï¼‰
```sql
CREATE TABLE medical_terms (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    term VARCHAR(300) NOT NULL,
    definition TEXT,
    synonyms TEXT,  -- JSON array of synonyms
    category VARCHAR(100),  -- ç—‡çŠ¶, è¯Šæ–­, æ²»ç–—, è¯ç‰©ç­‰
    icd_code VARCHAR(20),   -- ICD-10ç¼–ç 
    umls_id VARCHAR(20),    -- UMLSç»Ÿä¸€åŒ»å­¦è¯­è¨€ç³»ç»ŸID
    frequency_score FLOAT DEFAULT 0.0,  -- åœ¨æ–‡æ¡£ä¸­çš„å‡ºç°é¢‘ç‡
    related_articles TEXT,  -- JSON array of article IDs
    version VARCHAR(20) DEFAULT 'home',
    language VARCHAR(10) DEFAULT 'en',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_term (term(100)),
    INDEX idx_category (category),
    INDEX idx_version_lang (version, language),
    UNIQUE KEY uk_term_version_lang (term, version, language),
    FULLTEXT INDEX ft_term_definition (term, definition)
);
```

#### ç—‡çŠ¶å…³ç³»è¡¨ï¼ˆsymptom_relationshipsï¼‰
```sql
CREATE TABLE symptom_relationships (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    symptom_term VARCHAR(200) NOT NULL,
    disease_name VARCHAR(300) NOT NULL,
    relationship_type VARCHAR(50),  -- 'may_have', 'has_symptom', 'causes'
    confidence_score FLOAT DEFAULT 1.0,
    article_id INTEGER,
    version VARCHAR(20) DEFAULT 'home',
    language VARCHAR(10) DEFAULT 'en',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (article_id) REFERENCES articles(id),
    INDEX idx_symptom (symptom_term),
    INDEX idx_disease (disease_name),
    INDEX idx_relationship (relationship_type),
    INDEX idx_article (article_id)
);
```

#### è¯ç‰©ä¿¡æ¯è¡¨ï¼ˆdrugsï¼‰
```sql
CREATE TABLE drugs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    generic_name VARCHAR(300),
    brand_names TEXT,  -- JSON array of brand names
    drug_class VARCHAR(200),
    description TEXT,
    indications TEXT,  -- é€‚åº”ç—‡
    contraindications TEXT,  -- ç¦å¿Œç—‡
    dosage TEXT,
    side_effects TEXT,
    interactions TEXT,
    article_id INTEGER,
    version VARCHAR(20) DEFAULT 'home',
    language VARCHAR(10) DEFAULT 'en',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (article_id) REFERENCES articles(id),
    INDEX idx_generic (generic_name),
    INDEX idx_class (drug_class),
    FULLTEXT INDEX ft_drug_info (generic_name, description, indications)
);
```

### 2. æœç´¢å¼•æ“ä¼˜åŒ–

#### å…¨æ–‡æœç´¢ç´¢å¼•
```sql
-- åˆ›å»ºä¸“é—¨çš„æœç´¢è§†å›¾
CREATE VIEW search_view AS
SELECT 
    a.id,
    a.title,
    a.content,
    c.name as category_name,
    GROUP_CONCAT(mt.term) as keywords,
    a.url,
    a.version,
    a.language,
    a.word_count
FROM articles a
LEFT JOIN categories c ON a.category = c.slug AND a.version = c.version AND a.language = c.language
LEFT JOIN medical_terms mt ON mt.version = a.version AND mt.language = a.language
WHERE a.content IS NOT NULL AND LENGTH(a.content) > 100
GROUP BY a.id;
```

#### æœç´¢æƒé‡é…ç½®
```sql
-- æœç´¢æƒé‡è¡¨
CREATE TABLE search_weights (
    field_name VARCHAR(50) PRIMARY KEY,
    weight FLOAT DEFAULT 1.0,
    boost_factor FLOAT DEFAULT 1.0
);

INSERT INTO search_weights (field_name, weight, boost_factor) VALUES
('title', 10.0, 2.0),
('content', 1.0, 1.0),
('keywords', 5.0, 1.5),
('category', 3.0, 1.2),
('excerpt', 2.0, 1.1);
```

### 3. ç´¢å¼•ä¼˜åŒ–

#### å¤åˆç´¢å¼•è®¾è®¡
```sql
-- å¸¸ç”¨æŸ¥è¯¢çš„å¤åˆç´¢å¼•
CREATE INDEX idx_article_lang_version ON articles(language, version);
CREATE INDEX idx_article_cat_lang ON articles(category, language);
CREATE INDEX idx_article_cat_lang_date ON articles(category, language, last_reviewed DESC);
CREATE INDEX idx_term_lang_cat ON medical_terms(language, category);

-- å…¨æ–‡æœç´¢ä¼˜åŒ–
ALTER TABLE articles ADD FULLTEXT ft_content (title, content);
ALTER TABLE medical_terms ADD FULLTEXT ft_term_def (term, definition);
ALTER TABLE drugs ADD FULLTEXT ft_drug_info (generic_name, description, indications);
```

#### æ€§èƒ½ç›‘æ§è¡¨
```sql
-- æœç´¢ç»Ÿè®¡è¡¨
CREATE TABLE search_statistics (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    query VARCHAR(500),
    results_count INTEGER DEFAULT 0,
    execution_time FLOAT DEFAULT 0.0,
    user_agent VARCHAR(200),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ€§èƒ½åˆ†æè¡¨
CREATE INDEX idx_search_query ON search_statistics(query);
CREATE INDEX idx_search_time ON search_statistics(execution_time);
CREATE INDEX idx_search_date ON search_statistics(created_at);
```

### 4. æ•°æ®å®Œæ•´æ€§

#### å¤–é”®çº¦æŸ
```sql
-- æ·»åŠ å¿…è¦çš„å¤–é”®çº¦æŸ
ALTER TABLE articles ADD CONSTRAINT fk_articles_category 
    FOREIGN KEY (category, version, language) 
    REFERENCES categories(slug, version, language);

-- åˆ›å»ºè§¦å‘å™¨è‡ªåŠ¨æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
CREATE TRIGGER update_article_count 
    AFTER INSERT ON articles
    FOR EACH ROW
    UPDATE categories 
    SET article_count = (
        SELECT COUNT(*) FROM articles 
        WHERE category = NEW.category 
        AND version = NEW.version 
        AND language = NEW.language
    )
    WHERE slug = NEW.category 
    AND version = NEW.version 
    AND language = NEW.language;
```

#### æ•°æ®éªŒè¯è§„åˆ™
```sql
-- åˆ›å»ºæ•°æ®éªŒè¯è¡¨
CREATE TABLE data_validation_rules (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    table_name VARCHAR(50) NOT NULL,
    field_name VARCHAR(50) NOT NULL,
    validation_rule VARCHAR(200),
    error_message VARCHAR(500),
    is_active BOOLEAN DEFAULT TRUE
);

INSERT INTO data_validation_rules (table_name, field_name, validation_rule, error_message) VALUES
('articles', 'url', 'url IS NOT NULL AND url != ""', 'URL cannot be empty'),
('articles', 'title', 'title IS NOT NULL AND LENGTH(title) > 5', 'Title must be at least 5 characters'),
('medical_terms', 'term', 'term IS NOT NULL AND LENGTH(term) > 2', 'Medical term must be at least 2 characters'),
('articles', 'language', 'language IN ("en", "zh", "fr", "de", "es", "it", "ja", "ko", "pt", "ru")', 'Unsupported language'),
('articles', 'version', 'version IN ("home", "professional", "veterinary")', 'Unsupported version');
```

---

## ğŸ”§ æŠ€æœ¯å®ç°æ¶æ„

### 1. é¡¹ç›®ç»“æ„è®¾è®¡
```
msd_crawler_project/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database_config.py
â”‚   â”œâ”€â”€ crawler_config.py
â”‚   â”œâ”€â”€ urls_config.py
â”‚   â””â”€â”€ logging_config.py
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ models.py              # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ setup_database.py     # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ crawler/
â”‚   â”œâ”€â”€ spiders/
â”‚   â”‚   â”œâ”€â”€ msd_home_spider.py
â”‚   â”‚   â”œâ”€â”€ msd_professional_spider.py
â”‚   â”‚   â””â”€â”€ msd_veterinary_spider.py
â”‚   â”œâ”€â”€ pipelines.py           # æ•°æ®å¤„ç†ç®¡é“
â”‚   â”œâ”€â”€ middlewares.py         # ä¸­é—´ä»¶
â”‚   â””â”€â”€ utils.py               # å·¥å…·å‡½æ•°
â”œâ”€â”€ parsers/
â”‚   â”œâ”€â”€ content_parser.py      # å†…å®¹è§£æå™¨
â”‚   â”œâ”€â”€ medical_parser.py      # åŒ»å­¦æœ¯è¯­è§£æå™¨
â”‚   â””â”€â”€ image_parser.py        # å›¾ç‰‡èµ„æºè§£æå™¨
â”œâ”€â”€ processors/
â”‚   â”œâ”€â”€ text_processor.py      # æ–‡æœ¬å¤„ç†
â”‚   â”œâ”€â”€ keyword_extractor.py   # å…³é”®è¯æå–
â”‚   â””â”€â”€ search_indexer.py      # æœç´¢å¼•æ“ç´¢å¼•
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ search_api.py          # æœç´¢APIæ¥å£
â”‚   â”œâ”€â”€ admin_api.py           # ç®¡ç†APIæ¥å£
â”‚   â””â”€â”€ database_api.py        # æ•°æ®åº“APIæ¥å£
â”œâ”€â”€ web_interface/
â”‚   â”œâ”€â”€ static/                # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ templates/             # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ app.py                 # Flaskåº”ç”¨
â”‚   â””â”€â”€ search_frontend.py     # å‰ç«¯æœç´¢ç•Œé¢
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_crawler.py        # çˆ¬è™«æµ‹è¯•
â”‚   â”œâ”€â”€ test_parser.py         # è§£æå™¨æµ‹è¯•
â”‚   â””â”€â”€ test_database.py       # æ•°æ®åº“æµ‹è¯•
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ DEPLOYMENT.md
â”‚   â””â”€â”€ USER_GUIDE.md
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.py               # é¡¹ç›®åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ backup.py              # æ•°æ®å¤‡ä»½è„šæœ¬
â”‚   â””â”€â”€ maintenance.py         # ç³»ç»Ÿç»´æŠ¤è„šæœ¬
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ README.md
â””â”€â”€ main.py                    # ä¸»ç¨‹åºå…¥å£
```

### 2. æ•°æ®æµç¨‹è®¾è®¡

#### æ•°æ®å¤„ç†æµæ°´çº¿
```python
DATA_PIPELINE = {
    "extraction": [
        "extract_url_from_sitemap",
        "extract_urls_from_category_pages",
        "discover_urls_from_content"
    ],
    "download": [
        "respect_rate_limits",
        "handle_session_management",
        "download_with_retry"
    ],
    "parsing": [
        "parse_html_structure",
        "extract_title_and_content",
        "extract_metadata",
        "extract_links_and_images"
    ],
    "processing": [
        "clean_text_content",
        "extract_medical_terms",
        "generate_summary",
        "calculate_readability_score"
    ],
    "validation": [
        "validate_data_integrity",
        "check_content_quality",
        "detect_duplicates"
    ],
    "storage": [
        "save_to_database",
        "update_search_index",
        "update_relationships"
    ],
    "monitoring": [
        "log_processing_stats",
        "track_errors",
        "generate_reports"
    ]
}
```

### 3. é…ç½®ç®¡ç†

#### ç»Ÿä¸€é…ç½®ç±»
```python
# config/settings.py
class MSDCrawlerConfig:
    def __init__(self):
        self.database_config = DatabaseConfig()
        self.crawler_config = CrawlerConfig()
        self.parser_config = ParserConfig()
        self.search_config = SearchConfig()
        
class DatabaseConfig:
    def __init__(self):
        self.host = "localhost"
        self.port = 3306
        self.username = "root"
        self.password = "password"
        self.database = "msd_manuals"
        self.charset = "utf8mb4"
        
class CrawlerConfig:
    def __init__(self):
        self.max_workers = 3
        self.delay_between_requests = 5.0
        self.max_retries = 3
        self.timeout = 30
        self.user_agents = USER_AGENTS
        self.respect_robots_txt = True
        
class ParserConfig:
    def __init__(self):
        self.enable_medical_ner = True
        self.enable_keyword_extraction = True
        self.min_content_length = 100
        self.max_content_length = 50000
        
class SearchConfig:
    def __init__(self):
        self.enable_fulltext_search = True
        self.default_results_per_page = 20
        self.max_results_per_page = 100
        self.search_timeout = 10.0
```

### 4. è´¨é‡ä¿è¯æœºåˆ¶

#### æ•°æ®è´¨é‡æ£€æŸ¥
```python
class DataQualityChecker:
    def __init__(self, config):
        self.config = config
        self.quality_rules = self._load_quality_rules()
    
    def validate_article(self, article):
        """éªŒè¯æ–‡ç« æ•°æ®è´¨é‡"""
        issues = []
        
        # åŸºç¡€æ£€æŸ¥
        if not article.get('title') or len(article['title']) < 5:
            issues.append("Title too short or missing")
        
        if not article.get('content') or len(article['content']) < 100:
            issues.append("Content too short or missing")
        
        # å†…å®¹è´¨é‡æ£€æŸ¥
        if self._calculate_readability(article['content']) < 30:
            issues.append("Content readability too low")
        
        # åŒ»å­¦æœ¯è¯­æ£€æŸ¥
        medical_terms_count = self._count_medical_terms(article['content'])
        if medical_terms_count < 5:
            issues.append("Insufficient medical terminology")
        
        # URLæœ‰æ•ˆæ€§æ£€æŸ¥
        if not self._is_valid_url(article['url']):
            issues.append("Invalid URL format")
        
        return {
            'is_valid': len(issues) == 0,
            'quality_score': self._calculate_quality_score(article),
            'issues': issues
        }
    
    def check_duplicate_content(self, article):
        """æ£€æŸ¥é‡å¤å†…å®¹"""
        # åŸºäºæ ‡é¢˜å’Œå†…å®¹hashæ£€æŸ¥
        title_hash = self._hash_string(article['title'])
        content_hash = self._hash_string(article['content'])
        
        return self._check_existing_hashes(title_hash, content_hash)
```

---

## ğŸ“Š ç›‘æ§ä¸ç»´æŠ¤

### 1. æ€§èƒ½ç›‘æ§

#### ç›‘æ§æŒ‡æ ‡
```python
class CrawlerMetrics:
    def __init__(self):
        self.metrics = {
            'pages_crawled': 0,
            'successful_downloads': 0,
            'failed_downloads': 0,
            'parse_errors': 0,
            'duplicates_found': 0,
            'new_articles_created': 0,
            'existing_articles_updated': 0,
            'processing_time': 0.0,
            'average_response_time': 0.0,
            'error_rate': 0.0
        }
    
    def log_progress(self):
        """è®°å½•çˆ¬è™«è¿›åº¦"""
        logging.info(f"Progress: {self.metrics}")
        
    def generate_report(self):
        """ç”Ÿæˆè¿›åº¦æŠ¥å‘Š"""
        return {
            'summary': self._generate_summary(),
            'performance': self._calculate_performance(),
            'errors': self._analyze_errors(),
            'recommendations': self._generate_recommendations()
        }
```

### 2. ç³»ç»Ÿç»´æŠ¤

#### å®šæœŸç»´æŠ¤ä»»åŠ¡
```python
MAINTENANCE_TASKS = {
    'daily': [
        'update_search_index',
        'backup_database',
        'clean_temporary_files'
    ],
    'weekly': [
        'optimize_database_tables',
        'update_medical_terms',
        'analyze_search_patterns'
    ],
    'monthly': [
        'full_database_backup',
        'analyze_crawler_performance',
        'update_quality_metrics',
        'generate_comprehensive_report'
    ]
}
```

---

## âœ… å®æ–½è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„ï¼ˆ1-2å‘¨ï¼‰
- [x] éœ€æ±‚åˆ†æå’Œç½‘ç«™ç»“æ„ç ”ç©¶
- [x] æ•°æ®åº“è®¾è®¡
- [x] çˆ¬è™«æ¶æ„è®¾è®¡
- [ ] åŸºç¡€çˆ¬è™«æ¡†æ¶å¼€å‘
- [ ] æ•°æ®åº“åˆå§‹åŒ–

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰
- [ ] ä¸»é¡µå’Œåˆ†ç±»é¡µçˆ¬è™«
- [ ] å†…å®¹è§£æå™¨å¼€å‘
- [ ] æ•°æ®æ¸…æ´—å’Œå­˜å‚¨
- [ ] åŸºç¡€æœç´¢åŠŸèƒ½

### ç¬¬ä¸‰é˜¶æ®µï¼šä¼˜åŒ–å‡çº§ï¼ˆ1-2å‘¨ï¼‰
- [ ] åçˆ¬è™«ç­–ç•¥ä¼˜åŒ–
- [ ] æ€§èƒ½è°ƒä¼˜
- [ ] å¢é‡æ›´æ–°æœºåˆ¶
- [ ] è´¨é‡ä¿è¯ç³»ç»Ÿ

### ç¬¬å››é˜¶æ®µï¼šç”¨æˆ·ç•Œé¢ï¼ˆ1å‘¨ï¼‰
- [ ] Webæœç´¢ç•Œé¢
- [ ] ç®¡ç†å‘˜åå°
- [ ] æ–‡æ¡£ç¼–å†™
- [ ] æµ‹è¯•å’Œéƒ¨ç½²

è¿™ä¸ªè®¾è®¡ä¸ºæ„å»ºä¸€ä¸ªé«˜æ•ˆã€åˆè§„ã€å¯æ‰©å±•çš„é»˜æ²™ä¸œè¯Šç–—æ‰‹å†Œçˆ¬è™«ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„æŠ€æœ¯è“å›¾ï¼Œç¡®ä¿èƒ½å¤ŸæˆåŠŸå®Œæˆæ•°æ®æŠ“å–å’Œæ£€ç´¢ä»»åŠ¡ã€‚